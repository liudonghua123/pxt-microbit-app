var pxt;"undefined"==typeof navigator||!/Trident/i.test(navigator.userAgent)||/skipbrowsercheck=1/i.exec(window.location.href)||/\/browsers/i.exec(window.location.href)||(window.location.href="/browsers"),function(e){const t=[];let r,o,n,s,i=!1,a=!1,p=!1;class c{constructor(e){this.log=e,this.q=[],t.push(this)}track(e,t,r){i?this.log(e,t,r):(this.q.push([e,t,r]),this.q.length>20&&this.q.shift())}flush(){for(;this.q.length;){const[e,t,r]=this.q.shift();this.log(e,t,r)}}}function f(e=!1){try{const e=new URLSearchParams(window.location.search);e.has("partner")&&(r=e.get("partner"))}catch(e){console.warn("Could not parse search string",e)}const o=window.loadAppInsights;o&&(p=o(e,l),i=!0,t.forEach((e=>e.flush())))}function l(e){const t=window.pxtConfig;if("PageviewData"==e.baseType&&!e.baseData.properties)return!1;if("PageviewPerformanceData"==e.baseType){const t=e.baseData.name;e.baseData.name=window.location.origin,e.baseData.properties||(e.baseData.properties={}),e.baseData.properties.pageName=t,e.baseData.properties.pathName=window.location.pathname}if(void 0===t||!t)return!0;const o=e.baseData;o.properties=o.properties||{},o.properties.target=t.targetId,o.properties.stage=(t.relprefix||"/--").replace(/[^a-z]/gi,""),r&&(o.properties.partner=r);const n=navigator.userAgent.toLowerCase(),s=/\belectron\/(\d+\.\d+\.\d+.*?)(?: |$)/i.exec(n);s&&(o.properties.Electron=1,o.properties.ElectronVersion=s[1]);const i=window.pxtElectron;void 0!==i&&(o.properties.PxtElectron=1,o.properties.ElectronVersion=i.versions.electronVersion,o.properties.ChromiumVersion=i.versions.chromiumVersion,o.properties.NodeVersion=i.versions.nodeVersion,o.properties.PxtElectronVersion=i.versions.pxtElectronVersion,o.properties.PxtCoreVersion=i.versions.pxtCoreVersion,o.properties.PxtTargetVersion=i.versions.pxtTargetVersion,o.properties.PxtElectronIsProd=i.versions.isProd);const c=/\((MakeCode Arcade Kiosk UWP)\/([\S]+)\/([\S]+)\)/i.exec(n);return c&&(o.properties.KioskUwp=1,o.properties.KioskUwpVersion=c[2],o.properties.KioskUwpPlatform=c[3]),o.properties.cookie=a&&p,!0}!function(e){let t;function r(){return Math.round(performance.now()-e.startTimeMs)}function o(e){let t=(e=Math.round(e))%1e3,r=Math.floor(e/1e3),o=r%60,n=Math.floor(r/60);return n>0?`${n}m${o}s`:r>5?`${r}s`:r>0?`${r}s${t}ms`:`${e}ms`}function n(t,o=r()){e.stats.milestones.push([t,o])}function s(){if(t=performance&&!!performance.mark&&!!performance.measure,t){performance.measure("measure from the start of navigation to now");let t=performance.getEntriesByType("measure")[0];e.startTimeMs=t.startTime}}e.stats={durations:[],milestones:[]},e.perfReportLogged=!1,e.splitMs=r,e.prettyStr=o,e.splitStr=function(){return o(r())},e.recordMilestone=n,e.init=s,e.measureStart=function(e){t&&performance.mark(`${e} start`)},e.measureEnd=function(r){if(t&&performance.getEntriesByName(`${r} start`).length){performance.mark(`${r} end`),performance.measure(`${r} elapsed`,`${r} start`,`${r} end`);let t=performance.getEntriesByName(`${r} elapsed`,"measure");if(t&&1===t.length){let o=t[0],n=o.duration;n>10&&e.stats.durations.push([r,o.startTime,n])}performance.clearMarks(`${r} start`),performance.clearMarks(`${r} end`),performance.clearMeasures(`${r} elapsed`)}},e.report=function(r=null){if(e.perfReportLogged=!0,t){const t={},n={};let s="performance report:\n";for(let[n,i]of e.stats.milestones)if(!r||n.indexOf(r)>=0){s+=`\t\t${n} @ ${o(i)}\n`,t[n]=i}s+="\n";for(let[t,i,a]of e.stats.durations){let e=r&&t.indexOf(r)>=0;if(a>50&&!r||e){s+=`\t\t${t} took ~ ${o(a)}`,a>1e3&&(s+=` (${o(i)} - ${o(i+a)})`),s+="\n"}n[t]=a}return console.log(s),{milestones:t,durations:n}}},s(),n("first JS running")}(s=e.perf||(e.perf={})),e.initAnalyticsAsync=function(){(function(){const e="undefined"!=typeof window,t=e&&!!window.pxtElectron,r=e&&!!window.ipcRenderer||/ipc=1/.test(location.hash)||/ipc=1/.test(location.search);return t||r})()||function(){try{return window&&window.self!==window.top}catch(e){return!1}}()&&/nocookiebanner=1/i.test(window.location.href)?f(!0):window.pxtSkipAnalyticsCookie?f(!1):f(!0)},e.aiTrackEvent=function(e,t,r){o||(o=new c(((e,t,r)=>window.appInsights.trackEvent({name:e,properties:t,measurements:r})))),o.track(e,t,r)},e.aiTrackException=function(e,t,r){n||(n=new c(((e,t,r)=>window.appInsights.trackException({exception:e,properties:t?{...r,kind:t}:r})))),n.track(e,t,r)},e.initializeAppInsightsInternal=f,e.setInteractiveConsent=function(e){a=e}}(pxt||(pxt={}));